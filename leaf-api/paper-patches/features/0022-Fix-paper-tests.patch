From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Dreeam <61569423+Dreeam-qwq@users.noreply.github.com>
Date: Thu, 15 Jan 2026 18:07:51 -0500
Subject: [PATCH] Fix paper tests

snakeyaml deprecated the external util class `Base64Coder` since snakeyaml 2.3
See: https://github.com/snakeyaml/snakeyaml/commit/3f0bedad5917490a1f7ef56a0920b5b93b214ade

It replaced it using Java's built-in Base64 util (java.util.Base64), which is better and more standard.

In here, I use Base64.getMimeDecoder() for the base64 decoding, to be compatible with old data that is using the old
standard (the Base64Coder is using MIME type).
See: https://docs.oracle.com/javase/8/docs/api/java/util/Base64.html#:~:text=MIME

And use the basic Base64 encoder to encode the data.

diff --git a/src/test/java/org/bukkit/util/io/BukkitObjectStreamTest.java b/src/test/java/org/bukkit/util/io/BukkitObjectStreamTest.java
index 7021a44e494b53e597dc97af4550b0a3990d038b..e68e4087334ad8dd1a9912d58995d2a5fc810946 100644
--- a/src/test/java/org/bukkit/util/io/BukkitObjectStreamTest.java
+++ b/src/test/java/org/bukkit/util/io/BukkitObjectStreamTest.java
@@ -19,7 +19,6 @@ import org.junit.jupiter.api.Disabled;
 import org.junit.jupiter.params.ParameterizedTest;
 import org.junit.jupiter.params.provider.Arguments;
 import org.junit.jupiter.params.provider.MethodSource;
-import org.yaml.snakeyaml.external.biz.base64Coder.Base64Coder;
 
 public class BukkitObjectStreamTest {
 
@@ -88,7 +87,7 @@ public class BukkitObjectStreamTest {
             }
         }
 
-        final byte[] preEncodedArray = Base64Coder.decode(preEncoded);
+        final byte[] preEncodedArray = java.util.Base64.getMimeDecoder().decode(preEncoded); // Leaf - Fix paper tests
 
         final Object readBack;
         final Object encoded;
@@ -149,7 +148,7 @@ public class BukkitObjectStreamTest {
             }
         }
 
-        final String string = new String(Base64Coder.encode(out.toByteArray()));
+        final String string = java.util.Base64.getEncoder().encodeToString(out.toByteArray()); // Leaf - Fix paper tests
         try {
             assertThat(preEncoded, is(string));
         } catch (Throwable t) {
