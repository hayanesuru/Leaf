From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Martijn Muijsers <martijnmuijsers@live.nl>
Date: Fri, 25 Nov 2022 15:07:55 +0100
Subject: [PATCH] Do not log expired message warnings

License: GPL-3.0 (https://www.gnu.org/licenses/gpl-3.0.html)
Gale - https://galemc.org

diff --git a/net/minecraft/network/chat/PlayerChatMessage.java b/net/minecraft/network/chat/PlayerChatMessage.java
index 0020227e8fc0c0895e625c424280052e5f60ff24..5963a8b580c17a02932c2774bd86758e6bd135ac 100644
--- a/net/minecraft/network/chat/PlayerChatMessage.java
+++ b/net/minecraft/network/chat/PlayerChatMessage.java
@@ -141,7 +141,7 @@ public record PlayerChatMessage(
     }
 
     public boolean hasExpiredServer(Instant timestamp) {
-        return timestamp.isAfter(this.timeStamp().plus(MESSAGE_EXPIRES_AFTER_SERVER));
+        return timestamp.isAfter(this.timeStamp().plus(MESSAGE_EXPIRES_AFTER_SERVER)); // Gale - do not log expired message warnings - diff on change
     }
 
     public boolean hasExpiredClient(Instant timestamp) {
diff --git a/net/minecraft/network/chat/SignedMessageChain.java b/net/minecraft/network/chat/SignedMessageChain.java
index 3a719a33eb37593cf33e55f287d7d3710ae943f7..cba4ee50f4e55415f337b225bc0a7122f18f4a31 100644
--- a/net/minecraft/network/chat/SignedMessageChain.java
+++ b/net/minecraft/network/chat/SignedMessageChain.java
@@ -54,7 +54,7 @@ public class SignedMessageChain {
                             this.setChainBroken();
                             throw new SignedMessageChain.DecodeException(SignedMessageChain.DecodeException.INVALID_SIGNATURE);
                         } else {
-                            if (playerChatMessage.hasExpiredServer(Instant.now())) {
+                            if (org.galemc.gale.configuration.GaleGlobalConfiguration.get().logToConsole.chat.expiredMessageWarning && playerChatMessage.hasExpiredServer(Instant.now())) { // Gale - do not log expired message warnings
                                 SignedMessageChain.LOGGER.warn("Received expired chat: '{}'. Is the client/server system time unsynchronized?", body.content());
                             }
 
