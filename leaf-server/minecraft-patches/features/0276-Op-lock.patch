From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Taiyou06 <kaandindar21@gmail.com>
Date: Tue, 22 Jul 2025 22:31:58 +0200
Subject: [PATCH] Op lock


diff --git a/net/minecraft/server/players/PlayerList.java b/net/minecraft/server/players/PlayerList.java
index fd6e21416bb0b82ae6b1f602a168069558f9ad93..bd263adfbd86ee1be674c6bfa26dec40f7c5d307 100644
--- a/net/minecraft/server/players/PlayerList.java
+++ b/net/minecraft/server/players/PlayerList.java
@@ -1212,6 +1212,9 @@ public abstract class PlayerList {
     }
 
     public void op(GameProfile profile) {
+        if (org.dreeam.leaf.config.modules.misc.OpLock.preventOpChanges) {
+            return;
+        }
         this.ops.add(new ServerOpListEntry(profile, this.server.getOperatorUserPermissionLevel(), this.ops.canBypassPlayerLimit(profile)));
         ServerPlayer player = this.getPlayer(profile.getId());
         if (player != null) {
@@ -1220,6 +1223,9 @@ public abstract class PlayerList {
     }
 
     public void deop(GameProfile profile) {
+        if (org.dreeam.leaf.config.modules.misc.OpLock.preventOpChanges) {
+            return;
+        }
         this.ops.remove(profile);
         ServerPlayer player = this.getPlayer(profile.getId());
         if (player != null) {
