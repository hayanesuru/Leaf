From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Taiyou06 <kaandindar21@gmail.com>
Date: Tue, 22 Jul 2025 22:31:58 +0200
Subject: [PATCH] Op lock


diff --git a/net/minecraft/server/players/PlayerList.java b/net/minecraft/server/players/PlayerList.java
index 570602e0fb00465eed1dcfb923775807c600a7bb..27763ca0ae77d271aa30a3feea76728cad5b4990 100644
--- a/net/minecraft/server/players/PlayerList.java
+++ b/net/minecraft/server/players/PlayerList.java
@@ -1213,6 +1213,9 @@ public abstract class PlayerList {
     }
 
     public void op(GameProfile profile) {
+        if (org.dreeam.leaf.config.modules.misc.OpLock.preventOpChanges) {
+            return;
+        }
         this.ops.add(new ServerOpListEntry(profile, this.server.getOperatorUserPermissionLevel(), this.ops.canBypassPlayerLimit(profile)));
         ServerPlayer player = this.getPlayer(profile.getId());
         if (player != null) {
@@ -1221,6 +1224,9 @@ public abstract class PlayerList {
     }
 
     public void deop(GameProfile profile) {
+        if (org.dreeam.leaf.config.modules.misc.OpLock.preventOpChanges) {
+            return;
+        }
         this.ops.remove(profile);
         ServerPlayer player = this.getPlayer(profile.getId());
         if (player != null) {
