From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: nostalgic853 <yuu8583@proton.me>
Date: Sun, 20 Nov 2022 00:20:00 +0800
Subject: [PATCH] KeYi: Player Skull API

Original license: MIT
Original project: https://github.com/KeYiMC/KeYi

diff --git a/src/main/java/org/bukkit/craftbukkit/entity/CraftPlayer.java b/src/main/java/org/bukkit/craftbukkit/entity/CraftPlayer.java
index e1f26ff10f83ea28b09dfba5b02caea182a8f445..d81979c51c81ba08cfb3a401b3f7fde84f492065 100644
--- a/src/main/java/org/bukkit/craftbukkit/entity/CraftPlayer.java
+++ b/src/main/java/org/bukkit/craftbukkit/entity/CraftPlayer.java
@@ -3593,4 +3593,31 @@ public class CraftPlayer extends CraftHumanEntity implements Player {
     public void setSimplifyContainerDesyncCheck(final boolean simplifyContainerDesyncCheck) {
         this.simplifyContainerDesyncCheck = simplifyContainerDesyncCheck;
     }
+
+    // Leaf start - KeYi - Player Skull API
+    @Override
+    public ItemStack getSkull() {
+        ItemStack skull = new ItemStack(Material.PLAYER_HEAD, 1);
+        org.bukkit.inventory.meta.SkullMeta meta = (org.bukkit.inventory.meta.SkullMeta) skull.getItemMeta();
+
+        meta.setOwningPlayer(this);
+        skull.setItemMeta(meta);
+
+        return skull;
+    }
+
+    @Override
+    @Deprecated(forRemoval = true)
+    public CompletableFuture<ItemStack> getSkullAsynchronously() {
+        org.apache.logging.log4j.LogManager.getLogger("Leaf")
+            .warn("You should not use this method: Player#getSkullAsynchronously(), cause low performance, " +
+                "and will be removed in the future.");
+        java.util.concurrent.ExecutorService executorService = java.util.concurrent.Executors.newCachedThreadPool();
+
+        CompletableFuture<ItemStack> future = (CompletableFuture<ItemStack>) executorService.submit(this::getSkull);
+        executorService.shutdown();
+
+        return future;
+    }
+    // Leaf end - KeYi - Player Skull API
 }
