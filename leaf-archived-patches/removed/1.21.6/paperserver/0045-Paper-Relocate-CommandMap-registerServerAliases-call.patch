From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Strokkur424 <strokkur.24@gmail.com>
Date: Tue, 17 Jun 2025 19:30:35 +0200
Subject: [PATCH] Paper: Relocate CommandMap#registerServerAliases() call

Removed since Paper 1.21.6, Leaf 1.21.5, fixed on Paper

Original license: GPLv3
Original project: https://github.com/PaperMC/Paper
Paper pull request: https://github.com/PaperMC/Paper/pull/12601

Fixed Paper#12600.

This PR relocates the CommandMap#registerServerAliases() call to be after the lifecycle events for COMMANDS has been
run to accommodate for commands registered during a plugin's onEnable method.

diff --git a/src/main/java/org/bukkit/craftbukkit/CraftServer.java b/src/main/java/org/bukkit/craftbukkit/CraftServer.java
index dd38057071de1ecce2e420bd0696a134190a09c1..77e5fc9e2625e2e31f12ff46c80ca55d39d6fe33 100644
--- a/src/main/java/org/bukkit/craftbukkit/CraftServer.java
+++ b/src/main/java/org/bukkit/craftbukkit/CraftServer.java
@@ -632,7 +632,6 @@ public final class CraftServer implements Server {
             this.commandMap.setFallbackCommands();
             this.setVanillaCommands(false);
             // Spigot end
-            this.commandMap.registerServerAliases();
             DefaultPermissions.registerCorePermissions();
             CraftDefaultPermissions.registerCorePermissions();
             if (!io.papermc.paper.configuration.GlobalConfiguration.get().misc.loadPermissionsYmlBeforePlugins) this.loadCustomPermissions(); // Paper
